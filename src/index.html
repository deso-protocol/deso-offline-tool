<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="DeSo web application that can be used to securely sign transactions offline."
    />
    <title>DeSo Offline Signing Tool</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="bg-gray-600">
    <div
      class="max-w-7xl mx-auto text-white bg-gray-800 rounded-md mt-4 overflow-hidden"
    >
      <header class="p-8 text-center">
        <h1 class="text-2xl font-bold leading-7 text-white">
          DeSo Offline Signing Tool
        </h1>
      </header>
      <nav
        id="main-nav"
        class="bg-gray-800 mx-auto px-8 flex h-16 items-center border border-white/10"
      >
        <div class="flex-shrink-0">
          <deso-logo></deso-logo>
        </div>

        <div class="ml-10 flex items-baseline space-x-4">
          <button data-tab="generate-txn-tab" class="nav-button">
            Generate Txn
          </button>
          <button data-tab="sign-txn-tab" class="nav-button">Sign</button>
          <button data-tab="broadcast-txn-tab" class="nav-button">
            Broadcast
          </button>
          <button data-tab="verify-txn-tab" class="nav-button">Verify</button>
        </div>

        <div class="ml-auto flex items-center">
          <button
            id="download-button"
            class="nav-button"
            aria-label="Download html"
          >
            <svg-icon icon="download"></svg-icon>
          </button>
          <a
            class="nav-button"
            href="https://github.com/deso-protocol/deso-standalone-app"
            aria-label="View the source on GitHub"
          >
            <svg-icon icon="github"></svg-icon>
          </a>
          <div class="ml-3">
            <span
              id="networkOnlineIndicator"
              class="flex flex-col items-center"
            >
              <svg-icon icon="wifi" class="text-green-500"></svg-icon>
              <span class="text-gray-300 text-xs">online</span>
            </span>
            <span
              id="networkOfflineIndicator"
              class="flex flex-col items-center hidden"
            >
              <svg-icon icon="wifi-off" class="text-orange-500"></svg-icon>
              <span class="text-gray-300 text-xs">offline</span>
            </span>
          </div>
        </div>
      </nav>

      <div class="bg-gray-800 p-12">
        <section id="generate-txn-tab" class="tab hidden">
          <header>
            <h2 class="tab__title">Generate Transaction</h2>
            <p>Online</p>
          </header>
          <div class="mb-4 py-4 text-secondary"></div>
          <form id="send-deso-txn-form" class="w-1/2">
            <section class="form-controls">
              <header>
                <h3>Transfer DeSo</h3>
              </header>
              <input-group
                inputId="senderPublicKey"
                labelText="Transactor Public Key"
              ></input-group>
              <input-group
                inputId="recipientPublicKey"
                labelText="Recipient Public Key"
              ></input-group>
              <input-group
                inputId="desoAmount"
                inputType="number"
                labelText="$DESO Amount"
              ></input-group>
            </section>
            <div>
              <button type="submit" class="primary-button">Generate</button>
            </div>
          </form>
          <section id="transactionHexSection" class="hidden">
            <header>
              <h4>Transaction Hex</h4>
            </header>
            <p class="secondary-text">
              You can enter this on the
              <button
                class="inline-button"
                onclick="document.querySelector(`[data-tab='sign-txn-tab']`)?.click();"
              >
                Sign Tab
              </button>
              to sign it.
            </p>
            <div class="flex items-start mt-2">
              <div
                class="w-3/4 rounded-md bg-white/5 ring-1 ring-inset ring-white/10 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-500 p-1.5"
              >
                <span id="transactionHexContainer" class="break-words"></span>
              </div>
              <copy-to-clipboard id="copyTxnHexButton"></copy-to-clipboard>
            </div>
          </section>
        </section>

        <section id="sign-txn-tab" class="tab hidden">
          <header>
            <h2 class="tab__title">Sign Transactions or Messages</h2>
            <p>Offline</p>
          </header>
          <div class="py-4 secondary-text mb-4">
            <p class="mb-2">
              Enter your seed to sign transactions or arbitrary messages. You
              can broadcast transactions on the
              <button
                class="inline-button"
                onclick="document.querySelector(`[data-tab='broadcast-txn-tab']`)?.click();"
              >
                Broadcast Tab
              </button>
              or verify signatures on the
              <button
                class="inline-button"
                onclick="document.querySelector(`[data-tab='verify-txn-tab']`)?.click();"
              >
                Verify Tab</button
              >.
            </p>
            <p>
              This tab can be used offline, so you can download this tool and
              run it on an air-gapped machine for secure transaction signing.
            </p>
          </div>
          <form id="enterSeedForm" class="w-1/2">
            <section class="form-controls">
              <header class="mb-3">
                <h3>Enter Your DeSo Seed</h3>
              </header>
              <input-group
                labelText="DeSo Seed Phrase"
                inputId="mnemonic"
                inputPlaceholder="easily burden captain garment hidden gun economy road inner dance whisper buzz"
              ></input-group>
              <input-group
                labelText="Account Number"
                inputId="accountNumber"
                inputValue="0"
              ></input-group>
              <input-group
                labelText="Passphrase (optional)"
                inputId="passphrase"
              ></input-group>
              <input-group
                labelText="Seed Hex"
                inputId="seedHex"
                hintText="Only enter this if you do not have a seed phrase."
              ></input-group>
            </section>
            <div>
              <button type="submit" class="primary-button">Next</button>
            </div>
          </form>
          <section id="publicKeyBase58Section" class="hidden">
            <header>
              <h4>Public Key</h4>
            </header>
            <p class="secondary-text">
              Please confirm that this is the public key you expect to see.
            </p>
            <div
              class="mt-2 w-1/2 rounded-md bg-white/5 ring-1 ring-inset ring-white/10 focus-within:ring-2 focus-within:ring-inset focus-within:ring-indigo-500 p-1.5"
            >
              <span id="publicKeyBase58Container" class="break-words"></span>
            </div>
          </section>

          <form id="signTxForm" class="w-1/2 hidden mt-10">
            <section class="form-controls">
              <header class="mb-3">
                <h3>Sign Transaction</h3>
              </header>
              <div class="input-group">
                <label for="transactionHex">Txn Hex</label>
                <p class="secondary-text">
                  The hex of the transaction you want to sign.
                </p>
                <textarea type="text" id="transactionHexToSign "></textarea>
              </div>
            </section>
            <div>
              <button type="submit" class="primary-button">Sign</button>
            </div>
          </form>
        </section>

        <section id="broadcast-txn-tab" class="tab hidden">
          Broadcast Txn
        </section>
        <section id="verify-txn-tab" class="tab hidden">Verify Txn</section>
      </div>
    </div>
    <script src="main.js"></script>
  </body>
</html>
